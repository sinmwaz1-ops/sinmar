<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIES | SINMAR+</title>
    <style>
        :root { --bg: #050505; --cyan: #00E5FF; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; }
        .header { position: sticky; top: 0; background: rgba(5,5,5,0.95); z-index: 100; padding: 15px; border-bottom: 2px solid var(--cyan); display: flex; justify-content: space-between; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; padding: 20px; }
        .card { background: #111; border-radius: 10px; cursor: pointer; position: relative; overflow: hidden; height: 210px; border: 2px solid transparent; }
        .card:focus { border-color: var(--cyan); transform: scale(1.05); outline: none; }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .card-t { position: absolute; bottom: 0; width: 100%; background: linear-gradient(transparent, black); font-size: 11px; padding: 10px 5px; text-align: center; }
        #player-layer { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:9999; }
    </style>
</head>
<body>
    <div id="player-layer"><button onclick="closeP()" style="position:absolute; top:20px; right:20px; z-index:10000; background:red; color:white; border:none; padding:10px;">إغلاق X</button><video id="v" controls playsinline style="width:100%; height:100%;"></video></div>
    <div class="header"><div>SINMAR<span style="color:var(--cyan)">+</span> MOVIES</div><input type="text" id="s" placeholder="بحث..." style="border-radius:20px; padding:5px 15px;"></div>
    <div id="main"></div>

    <script>
        const url = "https://quiet-dream-9305.naaay1212.workers.dev"; // تأكد من رابط الوركر حقك
        let movies = {};

        async function load() {
            const res = await fetch(url);
            const data = await res.json();
            movies = data.movies;
            render(movies);
        }

        function render(data) {
            const m = document.getElementById('main'); m.innerHTML = '';
            for (let cat in data) {
                let s = `<h2 style="padding:0 20px; color:var(--cyan)">${cat}</h2><div class="grid">`;
                s += data[cat].map(i => `<div class="card" tabindex="0" onclick="play('${i.url}')"><img src="${i.logo}"><div class="card-t">${i.name}</div></div>`).join('');
                m.innerHTML += s + `</div>`;
            }
        }

        function play(u) { const p = document.getElementById('player-layer'); const v = document.getElementById('v'); p.style.display='block'; v.src=u; v.play(); if(v.webkitEnterFullscreen) v.webkitEnterFullscreen(); }
        function closeP() { const v = document.getElementById('v'); v.pause(); v.src=''; document.getElementById('player-layer').style.display='none'; }
        
        load();
    </script>
</body>
</html>
