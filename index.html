<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINMAR+</title>
    <style>
        :root { --cyan: #00E5FF; --white: #FFFFFF; --bg: #050505; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; overflow: hidden; }

        /* أنميشن الدخول */
        #splash { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: black; display: flex; justify-content: center; align-items: center; 
            z-index: 10000; font-size: 50px; font-weight: bold; 
        }
        .s-text { color: var(--white); opacity: 0; transform: translateY(20px); animation: fadeIn 1s forwards; }
        .plus-text { color: var(--cyan); opacity: 0; animation: fadeIn 1s 1s forwards; }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        /* الواجهة */
        .container { padding: 20px; display: none; height: 100vh; overflow-y: auto; }
        .row { display: flex; overflow-x: auto; gap: 15px; padding: 15px 0; scrollbar-width: none; }
        .card { 
            min-width: 180px; background: #111; border: 3px solid transparent; 
            border-radius: 12px; outline: none; transition: 0.2s; cursor: pointer;
        }
        .card:focus { border-color: var(--cyan); transform: scale(1.08); background: #222; }
        .card-t { padding: 10px; text-align: center; font-size: 14px; }
        
        #player-layer { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:999; }
    </style>
</head>
<body>

    <div id="splash">
        <span class="s-text">SINMAR</span><span class="plus-text">+</span>
    </div>

    <div id="player-layer"><video id="mainV" controls autoplay style="width:100%; height:100%;"></video></div>

    <div class="container" id="content"></div>

    <script>
        const worker = "https://quiet-dream-9305.naaay1212.workers.dev";

        // إخفاء شاشة الدخول وتحميل المحتوى
        setTimeout(() => {
            document.getElementById('splash').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            loadData();
        }, 3000);

        async function loadData() {
            const res = await fetch(worker);
            const data = await res.json();
            const container = document.getElementById('content');
            const all = {...data.live, ...data.movies};
            
            for (let cat in all) {
                let h = `<h2 style="color:var(--cyan); margin-top:30px;">${cat}</h2><div class="row">`;
                h += all[cat].map(i => `
                    <div class="card" tabindex="0" onclick="play('${i.url}')">
                        <div style="height:80px; background:#333; border-radius:8px 8px 0 0; display:flex; align-items:center; justify-content:center; font-weight:bold;">TV</div>
                        <div class="card-t">${i.name}</div>
                    </div>`).join('');
                container.innerHTML += h + `</div>`;
            }
            document.querySelector('.card').focus(); // تفعيل الريموت
        }

        function play(u) {
            // محاولة التشغيل بـ VLC للتلفزيون لضمان عدم حدوث خطأ MIME
            if (confirm("هل تريد التشغيل في VLC لضمان أفضل جودة؟")) {
                window.location.href = "intent://" + u.replace("http://", "") + "#Intent;scheme=http;type=video/*;package=org.videolan.vlc;end";
            } else {
                const v = document.getElementById('mainV');
                document.getElementById('player-layer').style.display = 'block';
                v.src = u;
                v.play().catch(() => alert("المتصفح لا يدعم هذا الرابط، يرجى اختيار VLC"));
            }
        }
    </script>
</body>
</html>
